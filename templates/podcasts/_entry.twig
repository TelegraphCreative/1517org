{% extends "_layouts/_base" %} 
{% import '_macros/global' as global %}

{% block content %}

    <section class="space-menu | space-b">

        {# Media Hero #}
        {{ global.image( entry.heroImage.one(), '-fit-cover' )}}
        
        {# Podcast Player Full #}
        <podcast_player_full title="{{ entry.title }}" url="{{ entry.podcastLink }}" />

    </section>

    {# Layout Notes: 
        First, we grab block 1 from the matrix and wrap that in the first `article.entry-main` element
        Then, we go back out and close `article` element to insert the sidebar
        Lastly, close the `aside` element and reopen `article.entry-main` with the modifier `-wide` 
        This lets us do a 2 things efficiently:
            - Styles force a reorder on small screens to push the sidebar to the bottom and show article content first as one piece.
            - While also letting us get a fullwidth area for the matrix blocks on large screens to accomodate fullbleed elements (like images).
    #}

    {# Article + Aside (top) #}
    <div class="entry-detail-layout | container | space-b | flex-grid">

        {# Content #}
        <article class="entry-main | gutter-xl">
        
            {# Header #}
            <header class="entry__header">
                <h1 class="header-xl | font-serif">{{ entry.title }}</h1>
                {% if entry.shortDescription|length %}
                <div class="paragraphs -md">
                    <p>{{ entry.shortDescription }}</p>
                </div>
                {% endif %}
            </header>

            {# Blocks #}
            <div class="entry__blocks | longform-entry-blocks -top">

                {# Longform Content #}
                {% include '_components/longform-entry-blocks--top' with { classes: '', block: entry.contentBlocksStandard.one() } %}

            </div>
            
        </article>
        
        {# Aside #}
        <aside class="entry-aside">
            {# Meta List #}
            <ul class="meta-list">
                <li>
                    <time class="meta-label | text-slate-light" datetime="{{ entry.postDate | date( 'm-d-y') }}">{{ entry.postDate | date( 'M d, Y') }}</time>
                </li>
                <li>
                    {{ global.relatedTopics(entry.topics.all(), '') }}
                </li>
                <li>
                    {% include "_components/list-social" with { content: '', classes: '-inline', share: true } %}
                </li>
                <li>
                    <a href="{{ entry.podcastShow.level(1)[0].url }}" class="link -meta">Browse all Episodes</a>
                </li>
            </ul>
            
            {# Ad #}
            {% include "_components/product-ad" with { content: entry.productAd } %}
            
        </aside>


        {# Article + Aside (bottom) #}
        {% if entry.contentBlocksStandard|length>1 %}
            
            {# Content #}
            <article class="entry-main -wide">

                {# Blocks #}
                <div class="entry__blocks | longform-entry-blocks">

                    {# Longform Content #}
                    {% include '_components/longform-entry-blocks' with { blocks: entry.contentBlocksStandard.offset(1).all(), layoutClasses: 'narrow-block gutter-xl' } %}

                    {# Citation #}
                    {% if entry.citation is defined %}
                        <div class="narrow-block gutter-xl">
                            <div class="article-content entry-footnote">
                                <small>{{ entry.citation }}</small>
                            </div>
                        </div>
                    {% endif %}
                    
                </div>
                
            </article>
            

        {% endif %}
    
    </div>

    {# Related Content #}
    {% include '_components/related-content-cards' with { section: 'podcasts', podcastCard: true } %}


    {# Subscribe Billboard  #}
    {% set podcastShow = entry.podcastShow.level(1)[0] %}
    {% include '_components/billboard--subscribe' with { classes: '-bronze-light', content: podcastShow } %}


{% endblock %}